
function getHtmlPopupContents_work_art_upload(workNumber) {
    let html = '';

    html = `
        <div style = "max-width: 1200px;">
            <div class = "popup_contents_top" style = "border-bottom: unset;">
                <div class = "popup_contents_top_left md-ripples" onclick = "backPopupContents();" onmouseenter = "hoverInformation(this, getLanguage('popup_contents:back'));">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><g transform="translate(-12.086 -0.24)"><rect width="3" height="35" rx="1.5" transform="translate(36.399 0.479) rotate(45)"></rect><rect width="3" height="35" rx="1.5" transform="translate(38.521 47.879) rotate(135)"></rect></g><rect width="49" height="3" rx="1.5" transform="translate(1 23.5)"></rect></g></svg>
                </div>
                <div class = "popup_contents_top_right">
                    ` + getLanguage("popup_work_art_uploadtop_title") + `
                </div>
            </div>
            
            <div id = "edit_profile_picture_navigation_wrap">
                <div class = "edit_profile_picture_navigation">
                    <div class = "edit_profile_picture_navigation_item md-ripples edit_profile_picture_navigation_item_selected" onclick = "workArtUploadContentsChange(` + workNumber + `, 1);">
                        <div class = "edit_profile_picture_navigation_item_title">
                            <div class = "edit_profile_picture_navigation_item_icon">
                                <!-- Generated by IcoMoon.io -->
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.984 6v9.984h16.031v-9.984h-16.031zM20.016 18h3.984v2.016h-24v-2.016h3.984q-0.797 0-1.383-0.609t-0.586-1.406v-9.984q0-0.797 0.586-1.406t1.383-0.609h16.031q0.797 0 1.383 0.609t0.586 1.406v9.984q0 0.797-0.586 1.406t-1.383 0.609z"></path></svg>
                            </div>
                            ` + getLanguage("popup_workspace_work_upload_cover_button_1") + `
                        </div>
                    </div>
                    <div class = "edit_profile_picture_navigation_item md-ripples" onclick = "workArtUploadContentsChange(` + workNumber + `, 2);">
                        <div class = "edit_profile_picture_navigation_item_title">
                            <div class = "edit_profile_picture_navigation_item_icon">
                                <!-- Generated by IcoMoon.io -->
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.484 12q0.609 0 1.055-0.422t0.445-1.078-0.445-1.078-1.055-0.422-1.055 0.422-0.445 1.078 0.445 1.078 1.055 0.422zM14.484 8.016q0.609 0 1.055-0.445t0.445-1.055-0.445-1.055-1.055-0.445-1.055 0.445-0.445 1.055 0.445 1.055 1.055 0.445zM9.516 8.016q0.609 0 1.055-0.445t0.445-1.055-0.445-1.055-1.055-0.445-1.055 0.445-0.445 1.055 0.445 1.055 1.055 0.445zM6.516 12q0.609 0 1.055-0.422t0.445-1.078-0.445-1.078-1.055-0.422-1.055 0.422-0.445 1.078 0.445 1.078 1.055 0.422zM12 3q3.703 0 6.352 2.344t2.648 5.672q0 2.063-1.477 3.516t-3.539 1.453h-1.734q-0.656 0-1.078 0.445t-0.422 1.055q0 0.516 0.375 0.984t0.375 1.031q0 0.656-0.422 1.078t-1.078 0.422q-3.75 0-6.375-2.625t-2.625-6.375 2.625-6.375 6.375-2.625z"></path></svg>
                            </div>
                            ` + getLanguage("popup_workspace_work_upload_cover_button_2") + `
                        </div>
                    </div>
                </div>
                <div class = "edit_profile_picture_navigation_bottom">
                    <div class = "edit_profile_picture_navigation_bottom_line"></div>
                </div>
            </div>
            <div class = "edit_profile_picture_line"></div>

            <div class = "edit_profile_picture_contents" style = "width: 100%; padding: 0px;">
                ` + getHtmlWorkArtImageUpload(workNumber) + `
            </div>
        </div>
    `;

    return html;
}


function getHtmlWorkArtImageUpload(workNumber) {
    let html = '';

    html = `
        <div class = "workspace_work_cover_upload_upload_image" ondragenter = "workArtUploadDragEnter(this, ` + workNumber + `);">
            <div class = "workspace_work_cover_upload_upload_image_svg">
                <!-- Generated by IcoMoon.io -->
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.984 6v9.984h16.031v-9.984h-16.031zM20.016 18h3.984v2.016h-24v-2.016h3.984q-0.797 0-1.383-0.609t-0.586-1.406v-9.984q0-0.797 0.586-1.406t1.383-0.609h16.031q0.797 0 1.383 0.609t0.586 1.406v9.984q0 0.797-0.586 1.406t-1.383 0.609z"></path></svg>
            </div>
            <div class = "workspace_work_cover_upload_upload_image_title">
                ` + getLanguage("popup_workspace_work_upload_cover_contents_upload_image_title") + `
            </div>
            <div class = "workspace_work_cover_upload_upload_image_description">
                ` + getLanguage("popup_work_art_upload_contents_upload_image_description") + `
            </div>
            <div class = "edit_profile_picture_upload_contents_button md-ripples" onclick = "workArtUploadButton(this);" style = "margin-top: 30px;">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M-4.438,42.27v0L.4,28.587,21.847,7.145a2.12,2.12,0,0,1,1.506-.632,1.945,1.945,0,0,1,1.387.567l7.071,7.071a1.944,1.944,0,0,1,.567,1.433,2.125,2.125,0,0,1-.632,1.459L10.3,38.487-4.436,42.27ZM23.387,9.839h0L3.162,30.064-.327,38.621l9.154-2.892L29.052,15.5,23.387,9.839Z" transform="translate(5.102 6.536)"></path><path d="M28.7,19.1a1.987,1.987,0,0,1-1.414-.586l-7.071-7.071a2,2,0,0,1,0-2.828l6.368-6.368a2,2,0,0,1,2.829,0l7.071,7.071a2,2,0,0,1,0,2.828L30.116,18.51A1.987,1.987,0,0,1,28.7,19.1ZM27.995,5.067h0l-4.95,4.95,5.666,5.665,4.95-4.949L27.995,5.067Z" transform="translate(12.102 -0.464)"></path></g></svg>
                ` + getLanguage("popup_workspace_work_upload_cover_contents_upload_image_button") + `
                <input type = "file" onchange = "requestWorkArtUpload(` + workNumber + `, this.files[0]);" accept = "image/png, image/jpeg, image/webp, image/gif" style = "display: none;">
            </div>
        </div>

        <div style = "width: 600px; height: 0px;"></div>
    `;

    return html;
}

function workArtUploadButton(el) {
    el.getElementsByTagName("input")[0].click();
}

function workArtUploadDragEnter(el, workNumber) {
    el.setAttribute("ondrop", "workArtUploadDrag(this, event, " + workNumber + ");");
    el.setAttribute("ondragover", "workArtUploadDragOver(this, event);");
    el.setAttribute("ondragend", "workArtUploadDragEnd(this);");
    el.setAttribute("ondragleave", "workArtUploadDragEnd(this);");
    el.setAttribute("ondragexit", "workArtUploadDragEnd(this);");
}
function workArtUploadDragOver(el, event) {
    el.classList.add("workspace_work_cover_upload_upload_image_drag");

    event.preventDefault();
}
function workArtUploadDragEnd(el) {
    el.classList.remove("workspace_work_cover_upload_upload_image_drag");
}
function workArtUploadDrag(el, event, workNumber) {
    el.classList.remove("workspace_work_cover_upload_upload_image_drag");

    let file = event.dataTransfer.files[0];
    requestWorkArtUpload(workNumber, file);

    event.preventDefault();
}
function requestWorkArtUpload(workNumber, file) {
    spinLoading();

    const xhr = new XMLHttpRequest();
    const method = "POST";
    
    xhr.open(method, "https://img.louibooks.com/upload.php");
    
    xhr.addEventListener('readystatechange', function (event) {
        const { target } = event;
        if (target.readyState === XMLHttpRequest.DONE) {
            const { status } = target;
            if (status === 0 || (status >= 200 && status < 400)) {
                let xhrHtml = xhr.responseText;
                let json = JSON.parse(xhrHtml);
                
                requestWorkArtApply(workNumber, json["url"]);
                
                actionMessage(getLanguage("upload_image"));
                history.back();
            }
            spinLoadingComplete();
        }
    });
    
    var formData = new FormData();
    formData.append("imgFile", file);
    formData.append("type", "work_art");

    xhr.send(formData);
}
function requestWorkArtApply(workNumber, url) {
    loading();

    const xhr = new XMLHttpRequest();
    const method = "POST";
    
    xhr.open(method, "/php/work/apply_art.php");
    
    xhr.addEventListener('readystatechange', function (event) {
        const { target } = event;
        if (target.readyState === XMLHttpRequest.DONE) {
            const { status } = target;
            if (status === 0 || (status >= 200 && status < 400)) {
                let xhrHtml = xhr.responseText;

                //변경사항 반영
                if (getCurrentMenuName() == "work") {
                    let number = getCurrentMenuNumber();
                    let contents = document.getElementById("contents_" + number);
                    let work_art = contents.getElementsByClassName("menu_work_art");
                    if (work_art.length != 0) {
                        let work_art_img = work_art[0].getElementsByTagName("img")[0];
                        work_art_img.style.animation = null;
                        work_art_img.src = url;
                    }
                }
            }
            loadingComplete();
        }
    });
    
    var formData = new FormData();
    formData.append("workNumber", workNumber);
    formData.append("url", url);

    xhr.send(formData);
}








function workArtUploadContentsChange(workNumber, menu) {
    let contents = document.getElementsByClassName("edit_profile_picture_contents")[0];
    let item = document.getElementsByClassName("edit_profile_picture_navigation_item");
    let bottom_line = document.getElementsByClassName("edit_profile_picture_navigation_bottom_line")[0];
    if (menu == 1) {
        item[0].classList.add("edit_profile_picture_navigation_item_selected");
        item[1].classList.remove("edit_profile_picture_navigation_item_selected");
        bottom_line.style.marginLeft = "0%";

        checkHtmlPopupContents();
        contents.innerHTML = getHtmlWorkArtImageUpload(workNumber);
    } else if (menu == 2) {
        item[0].classList.remove("edit_profile_picture_navigation_item_selected");
        item[1].classList.add("edit_profile_picture_navigation_item_selected");
        bottom_line.style.marginLeft = "50%";

        checkHtmlPopupContents();
        contents.innerHTML = getHtmlWorkArtProvidedImages(workNumber);
    }
}












function getHtmlWorkArtProvidedImages(workNumber) {
    let html = '';

    let images = getImageUrlWorkArtProvidedImages("illustration");
    let contents = '';
    for (let i = 0; i < images.length; i++) {
        contents += `
            <div class = "work_art_upload_provided_images_contents_img img_wrap md-ripples" onclick = "requestWorkArtApply(` + workNumber + `, '` + images[i]["url"] + `'); history.back();" oncontextmenu = "moreButtonGoToSourcePage('` + images[i]["source_url"] + `', event);">
                <img src = "` + images[i]["url"] + `" onload = "imageLoad(event);" loading = "lazy">
            </div>
        `;
    }

    html = `
        <div class = "workspace_work_cover_upload_provided_images">
            <div class = "workspace_work_cover_upload_provided_images_top scroll">
                <div class = "workspace_work_cover_upload_provided_images_top_item md-ripples workspace_work_cover_upload_provided_images_top_item_selected" onclick = "setContentsWorkArtProvidedImages(` + workNumber + `, 'illustration');">
                    ` + getLanguage("provided_images_illustration") + `
                </div>
                <div class = "workspace_work_cover_upload_provided_images_top_item md-ripples" onclick = "setContentsWorkArtProvidedImages(` + workNumber + `, 'fantasy');">
                    ` + getLanguage("provided_images_fantasy") + `
                </div>
                <div class = "workspace_work_cover_upload_provided_images_top_item md-ripples" onclick = "setContentsWorkArtProvidedImages(` + workNumber + `, 'nature');">
                    ` + getLanguage("provided_images_nature") + `
                </div>
                <div class = "workspace_work_cover_upload_provided_images_top_item md-ripples" onclick = "setContentsWorkArtProvidedImages(` + workNumber + `, 'dark');">
                    ` + getLanguage("provided_images_dark") + `
                </div>
                <div class = "workspace_work_cover_upload_provided_images_top_item md-ripples" onclick = "setContentsWorkArtProvidedImages(` + workNumber + `, 'sf');">
                    ` + getLanguage("provided_images_sf") + `
                </div>
            </div>

            <div class = "workspace_work_cover_upload_provided_images_contents">
                ` + contents + `
            </div>
        </div>

        <div style = "width: 1200px; height: 0px;"></div>
    `;

    return html;
}

function setContentsWorkArtProvidedImages(workNumber, name) {
    checkHtmlPopupContents();
    let contents = document.getElementsByClassName("workspace_work_cover_upload_provided_images_contents")[0];
    contents.innerHTML = '';
    let images = getImageUrlWorkArtProvidedImages(name);
    for (let i = 0; i < images.length; i++) {
        let newEl = document.createElement("div");
        newEl.classList.add("work_art_upload_provided_images_contents_img");
        newEl.classList.add("img_wrap");
        newEl.classList.add("md-ripples");
        newEl.setAttribute("oncontextmenu", "moreButtonGoToSourcePage('" + images[i]["source_url"] + "', event);");
        newEl.setAttribute("tabindex", "0");
        newEl.setAttribute("onfocus", 'focusAccessibility(event);');
        newEl.innerHTML = `
            <img src = "` + images[i]["url"] + `" onload = "imageLoad(event);" loading = "lazy">
        `;
        newEl.setAttribute("onclick", "requestWorkArtApply(" + workNumber + ", '" + images[i]["url"] + "'); history.back();");
        contents.appendChild(newEl);
    }
}

function getImageUrlWorkArtProvidedImages(name) {
    let illustration = new Array(
        {
            "url": "https://img.louibooks.com/provided_work_art/illustration/1.webp",
            "source_url": "https://www.freepik.com/free-vector/nordic-landscape-with-mountains-camp_25581824.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/illustration/2.webp",
            "source_url": "https://www.freepik.com/free-vector/hiker-man-forest-with-mountains-horizon_16306103.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/illustration/3.webp",
            "source_url": "https://www.freepik.com/free-vector/traveler-man-shoot-winter-mountains-photo-camera-hiking-travel-journey-adventure-tourist-with-backpack-stand-rocky-snowy-landscape-with-peaks-extreme-recreation-cartoon-vector-illustration_22810205.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/illustration/4.webp",
            "source_url": "https://www.freepik.com/free-vector/camping-tents-with-campfire-tourist-stuff-forest-river-coast-traveler-halt-with-chair-drying-clothes-nature-landscape-scenery-view-summer-hiking-travel-cartoon-vector-illustration_25694005.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/illustration/5.webp",
            "source_url": "https://www.freepik.com/free-vector/log-bridge-jungle-alien-planet-sky_29086864.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/illustration/6.webp",
            "source_url": "https://www.freepik.com/free-vector/traveler-forest-with-mountains-view-morning_16334961.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/illustration/7.webp",
            "source_url": "https://www.freepik.com/free-vector/tropical-landscape-with-waterfall-jungle_27576483.htm"
        },
    );
    let fantasy = new Array(
        {
            "url": "https://img.louibooks.com/provided_work_art/fantasy/1.webp",
            "source_url": "https://www.freepik.com/free-photo/wizard-dark-dungeon-illustration_14402228.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/fantasy/2.webp",
            "source_url": "https://www.freepik.com/free-photo/alien-forest-illustration_14402237.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/fantasy/3.webp",
            "source_url": "https://www.freepik.com/free-photo/person-facing-purgatory-world-illustration_14402321.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/fantasy/4.webp",
            "source_url": "https://www.freepik.com/free-vector/magic-school-classroom-with-cauldron-night_16646800.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/fantasy/5.webp",
            "source_url": "https://www.freepik.com/free-photo/challenger-stands-front-spooky-castle-illustration_14402210.htm"
        },
    );
    let nature = new Array(
        {
            "url": "https://img.louibooks.com/provided_work_art/nature/1.webp",
            "source_url": "https://www.freepik.com/free-photo/natural-wonders-paradise-illustration_14541143.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/nature/2.webp",
            "source_url": "https://www.freepik.com/free-photo/beautiful-natural-environment-digital-painting_15174562.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/nature/3.webp",
            "source_url": "https://www.freepik.com/free-photo/two-travelers-discovered-ruins-ancient-city-dense-forest-3d-illustration_15174550.htm"
        },
    );
    let dark = new Array(
        {
            "url": "https://img.louibooks.com/provided_work_art/dark/1.webp",
            "source_url": "https://www.freepik.com/free-photo/masked-witch-dark-style-illustration_14402312.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/dark/2.webp",
            "source_url": "https://www.freepik.com/free-photo/team-soldiers-walk-city-after-nuclear-war-illustration_14402271.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/dark/3.webp",
            "source_url": "https://www.freepik.com/free-photo/city-tornado-doomsday-scene-illustration_14402247.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/dark/4.webp",
            "source_url": "https://www.freepik.com/free-photo/doomsday-scene-catastrophe-digital-illustration_14541101.htm"
        },
    );
    let sf = new Array(
        {
            "url": "https://img.louibooks.com/provided_work_art/sf/1.webp",
            "source_url": "https://www.freepik.com/free-photo/group-armed-forces-walking-desert-distance-is-huge-alien-mothership-floating-air-3d-illustrations-digital-paintings_15174556.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/sf/2.webp",
            "source_url": "https://www.freepik.com/free-photo/multi-dimensional-urban-space-exotic-concepts-digital-painting_14541132.htm"
        },
        {
            "url": "https://img.louibooks.com/provided_work_art/sf/3.webp",
            "source_url": "https://www.freepik.com/free-photo/science-fiction-scene_14541102.htm"
        },
    );

    let items = document.getElementsByClassName("workspace_work_cover_upload_provided_images_top_item");
    for (let i = 0; i < items.length; i++) {
        items[i].classList.remove("workspace_work_cover_upload_provided_images_top_item_selected");
    }

    if (name == "illustration") {
        if (items[0] != null) {
            items[0].classList.add("workspace_work_cover_upload_provided_images_top_item_selected");
        }
        return illustration;
    } else if (name == "fantasy") {
        if (items[1] != null) {
            items[1].classList.add("workspace_work_cover_upload_provided_images_top_item_selected");
        }
        return fantasy;
    } else if (name == "nature") {
        if (items[2] != null) {
            items[2].classList.add("workspace_work_cover_upload_provided_images_top_item_selected");
        }
        return nature;
    } else if (name == "dark") {
        if (items[3] != null) {
            items[3].classList.add("workspace_work_cover_upload_provided_images_top_item_selected");
        }
        return dark;
    } else if (name == "sf") {
        if (items[4] != null) {
            items[4].classList.add("workspace_work_cover_upload_provided_images_top_item_selected");
        }
        return sf;
    }
}







function moreButtonGoToSourcePage(url, event) {
    let slot = new Array();
    slot[0] = {
        'icon': '<!-- Generated by IcoMoon.io --><svg style = "transform: scale(1.2);" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9.984l3.984 4.031h-3v6h-1.969v-6h-3zM18.984 3.984q0.844 0 1.43 0.586t0.586 1.43v12q0 0.797-0.609 1.406t-1.406 0.609h-3.984v-2.016h3.984v-9.984h-13.969v9.984h3.984v2.016h-3.984q-0.844 0-1.43-0.586t-0.586-1.43v-12q0-0.844 0.586-1.43t1.43-0.586h13.969z"></path></svg>',
        'title': getLanguage("go_to_source_page"),
        'onclick': 'window.open(\'' + url + '\');',
    };
    moreButton(null, slot, event);
}