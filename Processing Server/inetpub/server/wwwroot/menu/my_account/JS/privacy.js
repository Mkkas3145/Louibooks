

function myAccountPrivacyLoad(menuNumber) {
    let contents = document.getElementById("contents_" + menuNumber);

    let title = contents.getElementsByClassName("menu_my_account_privacy_top_title")[0];
    title.innerHTML = getLanguage("menu_my_account_privacy_title");
    let description = contents.getElementsByClassName("menu_my_account_privacy_top_description")[0];
    description.innerHTML = getLanguage("menu_my_account_privacy_description");
    let bottom = contents.getElementsByClassName("menu_my_account_privacy_bottom")[0];
    bottom.innerHTML = getLanguage("menu_my_account_privacy_bottom");

    //데이터 수집
    let box = contents.getElementsByClassName("menu_my_account_privacy_box")[0];
    title = box.getElementsByClassName("menu_my_account_privacy_box_title")[0];
    description = box.getElementsByClassName("menu_my_account_privacy_box_description")[0];
    title.innerHTML = '<!-- Generated by IcoMoon.io --><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M16 0c-6.744 0-14 2.033-14 6.5v19c0 4.465 7.256 6.5 14 6.5s14-2.035 14-6.5v-19c0-4.467-7.258-6.5-14-6.5zM28 25.5c0 2.484-5.373 4.5-12 4.5-6.628 0-12-2.016-12-4.5v-3.736c2.066 2.129 7.050 3.236 12 3.236s9.934-1.107 12-3.236v3.736zM28 19.5h-0.004c0 0.010 0.004 0.021 0.004 0.031 0 2.469-5.373 4.469-12 4.469s-12-2-12-4.469c0-0.010 0.004-0.021 0.004-0.031h-0.004v-3.736c2.066 2.129 7.050 3.236 12 3.236s9.934-1.107 12-3.236v3.736zM28 13.5h-0.004c0 0.010 0.004 0.021 0.004 0.031 0 2.469-5.373 4.469-12 4.469s-12-2-12-4.469c0-0.010 0.004-0.021 0.004-0.031h-0.004v-3.436c2.621 1.997 7.425 2.936 12 2.936s9.379-0.939 12-2.936v3.436zM16 11c-6.628 0-12-2.016-12-4.5 0-2.486 5.372-4.5 12-4.5 6.627 0 12 2.014 12 4.5 0 2.484-5.373 4.5-12 4.5zM24 26c0-0.552 0.448-1 1-1s1 0.448 1 1c0 0.552-0.448 1-1 1s-1-0.448-1-1zM24 20c0-0.552 0.448-1 1-1s1 0.448 1 1c0 0.552-0.448 1-1 1s-1-0.448-1-1zM24 14c0-0.552 0.448-1 1-1s1 0.448 1 1c0 0.552-0.448 1-1 1s-1-0.448-1-1z"></path></svg>' + getLanguage("menu_my_account_privacy_box:0:title");
    description.innerHTML = getLanguage("menu_my_account_privacy_box:0:description");
    title = box.getElementsByClassName("menu_my_account_privacy_box_item_center_title");
    title[0].innerHTML = getLanguage("menu_my_account_privacy_item:0:0:title");
    title[1].innerHTML = getLanguage("menu_my_account_privacy_item:0:1:title");
    description = box.getElementsByClassName("menu_my_account_privacy_box_item_center_description");
    description[0].innerHTML = getLanguage("menu_my_account_privacy_item:0:0:description");
    description[1].innerHTML = getLanguage("menu_my_account_privacy_item:0:1:description");

    //알림
    box = contents.getElementsByClassName("menu_my_account_privacy_box")[1];
    title = box.getElementsByClassName("menu_my_account_privacy_box_title")[0];
    description = box.getElementsByClassName("menu_my_account_privacy_box_description")[0];
    title.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M42.282,39.4h0l-.226,0H1.251C.557,39.4.2,39.3.065,39.075c-.221-.363.152-1.085.769-2.282,1.4-2.715,4.315-8.364,4.6-18.745a21.434,21.434,0,0,1,1.682-8.6,15.31,15.31,0,0,1,4.146-5.562A17.322,17.322,0,0,1,22.285,0a16.042,16.042,0,0,1,10.5,4.409,18.085,18.085,0,0,1,5.659,13.638c.141,10.246,2.863,15.713,4.326,18.65.617,1.238.989,1.986.755,2.364C43.375,39.3,43,39.4,42.282,39.4ZM22.187,3.026c-6.61,0-13.7,4.015-13.76,15.285a46.872,46.872,0,0,1-2.09,13.2,29.949,29.949,0,0,1-1.958,4.9L39.3,36.4s0,0-.006-.009a27.524,27.524,0,0,1-1.879-4.733,47.874,47.874,0,0,1-2-13.351C35.34,7.268,27.28,3.075,22.217,3.026Z" transform="translate(3.124 0.378)"></path><path d="M6.4,0a6.4,6.4,0,0,1,6.4,6.4H0A6.4,6.4,0,0,1,6.4,0Z" transform="translate(30.704 50) rotate(180)"></path></g></svg>' + getLanguage("menu_my_account_privacy_box:1:title");
    description.innerHTML = getLanguage("menu_my_account_privacy_box:1:description");
    title = box.getElementsByClassName("menu_my_account_privacy_box_item_center_title");
    title[0].innerHTML = getLanguage("menu_my_account_privacy_item:1:0:title");
    title[1].innerHTML = getLanguage("menu_my_account_privacy_item:1:1:title");
    title[2].innerHTML = getLanguage("menu_my_account_privacy_item:1:2:title");
    title[3].innerHTML = getLanguage("menu_my_account_privacy_item:1:3:title");
    description = box.getElementsByClassName("menu_my_account_privacy_box_item_center_description");
    description[0].innerHTML = getLanguage("menu_my_account_privacy_item:1:0:description");
    description[1].innerHTML = getLanguage("menu_my_account_privacy_item:1:1:description");
    description[2].innerHTML = getLanguage("menu_my_account_privacy_item:1:2:description");
    description[3].innerHTML = getLanguage("menu_my_account_privacy_item:1:3:description");

    //푸시 알림 권한
    let item = box.getElementsByClassName("menu_my_account_privacy_box_item");
    if (Notification.permission === "granted") {
        item[0].setAttribute("toggle", true);
    }
}

function toggleMyAccountPrivacyItem(el, name) {
    let url = null;
    let toggle = el.getAttribute("toggle");
    if (toggle == true || toggle == "true") {
        if (name == "works_history") {
            url = "/php/history/works/pause.php";
        } else if (name == "search_history") {
            url = "/php/history/search/pause.php";
        } else if (name == "reply_notifications") {
            url = "/php/history/notifications/reply_pause.php";
        } else if (name == "activity_notifications") {
            url = "/php/history/notifications/activity_pause.php";
        } else if (name == "louibooks_notifications") {
            url = "/php/history/notifications/louibooks_pause.php";
        }
        toggle = false;
    } else {
        if (name == "works_history") {
            url = "/php/history/works/use.php";
        } else if (name == "search_history") {
            url = "/php/history/search/use.php";
        } else if (name == "reply_notifications") {
            url = "/php/history/notifications/reply_use.php";
        } else if (name == "activity_notifications") {
            url = "/php/history/notifications/activity_use.php";
        } else if (name == "louibooks_notifications") {
            url = "/php/history/notifications/louibooks_use.php";
        }
        toggle = true;
    }
    el.setAttribute("toggle", toggle);
    
    loading();

    const xhr = new XMLHttpRequest();
    const method = "POST";
    xhr.open(method, url);
    xhr.addEventListener('readystatechange', function (event) {
        const { target } = event;
        if (target.readyState === XMLHttpRequest.DONE) {
            const { status } = target;
            if (status === 0 || (status >= 200 && status < 400)) {
                let xhrHtml = xhr.responseText.trim();
                actionMessage(getLanguage("save_saved"));
            } else {
                if (status == 504) {
                    //시간 초과
                    serverResponseErrorMessage(0);
                } else {
                    //오류 발생
                    serverResponseErrorMessage(1);
                }
            }
            loadingComplete();
        }
    });
    
    var formData = new FormData();
    xhr.send(formData);
}