

var workspaceMyWorksLoadNumbers = new Array();

function workspaceMyWorksLoad(menuNumber) {
    let contents = document.getElementById("contents_" + menuNumber);
    let items = contents.getElementsByClassName("my_works_contents_items")[0];
    items.innerText = "";

    let numbers = document.getElementById("my_works_numbers_" + menuNumber).innerHTML.trim();
    let info_json = JSON.parse(document.getElementById("my_works_info_json_" + menuNumber).innerHTML);

    workspaceMyWorksLoadNumbers[menuNumber] = numbers.split(",");

    if (info_json != null) {
        for (let i = 0; i < info_json.length; i++) {
            let html = getHtmlWorkspaceMyWorks(info_json[i]);
            addContentsWorkspaceMyWorks(menuNumber, html);
    
            let array = workspaceMyWorksLoadNumbers[menuNumber];
            array = array.remove("" + info_json[i]["number"]);
            workspaceMyWorksLoadNumbers[menuNumber] = array;
        }
        checkWorkspaceMyWorksMoreLoading(menuNumber);
    } else {
        items.innerHTML = `
            <div class = "my_works_contents_not_exist">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"/></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M-3094.635,49.5H-3116.5a3,3,0,0,1-3-3V3.5a3,3,0,0,1,3-3h31a3,3,0,0,1,3,3V37.365L-3094.635,49.5Z" transform="translate(3126)" opacity="0.7"/><path d="M3151.333,49.5l12.293-12.293h-9.846a2.517,2.517,0,0,0-1.983.575,2.884,2.884,0,0,0-.464,2.039Z" transform="translate(-3120)" opacity="0.6"/></g></svg>
                <div class = "my_works_contents_not_exist_title">
                    ` + getLanguage("workspace_my_works_no_data") + `
                </div>
                <div class = "my_works_contents_not_exist_description">
                    ` + getLanguage("no_data_description") + `
                </div>
            </div>
        `;
        hideWorkspaceMyWorksMoreLoading(menuNumber);
    }

    //옵션
    let sort = contents.getElementsByClassName("sort_box_title");
    if (sort[0].innerText.trim() == "") {
        sort[0].innerText = getLanguage("workspace_my_works_select_sort:0");
    }
    if (sort[1].innerText.trim() == "") {
        sort[1].innerText = getLanguage("workspace_my_works_select_work_type:0");
    }
}

function getHtmlWorkspaceMyWorks(info) {
    let html = "";

    let work_cover = info["cover_image"];
    if (work_cover == null) {
        work_cover = info["default_cover_image"];
    }

    html = `
        <div class = "my_works_contents_item">
            <div class = "my_works_contents_item_left md-ripples img_wrap" onclick = "loadWorkspace_work_details(` + info["number"] + `);">
                <img src = "` + work_cover + `" onload = "imageLoad(event);">
            </div>
            <div class = "my_works_contents_item_right">
                <div class = "my_works_contents_item_right_title md-ripples" onclick = "loadWorkspace_work_details(` + info["number"] + `);">
                    <div class = "my_works_contents_item_right_title_text">
                        ` + info["title"] + `
                    </div>
                </div>
                <div style = "left: -10px; top: -10px; position: relative;">
                    <div class = "my_works_contents_item_right_public_status md-ripples" value = "` + info["public_status"] + `" previous_value = "` + info["public_status"] + `" onchange = "workspaceMyWorksChangeState(this, ` + info["number"] + `);" popupsize = "parent" popupwidth = "max-content" onclick = "selectList(this, create_work_select_list('public_status', true));">
                        <div class = "my_works_contents_item_right_public_status_icon">
                            <div class = "my_works_contents_item_right_public_status_icon_0">
                                <!-- Generated by IcoMoon.io -->
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 12h14c0.276 0 0.525 0.111 0.707 0.293s0.293 0.431 0.293 0.707v7c0 0.276-0.111 0.525-0.293 0.707s-0.431 0.293-0.707 0.293h-14c-0.276 0-0.525-0.111-0.707-0.293s-0.293-0.431-0.293-0.707v-7c0-0.276 0.111-0.525 0.293-0.707s0.431-0.293 0.707-0.293zM8 10v-3c-0.001-1.106 0.445-2.105 1.169-2.831 0.723-0.724 1.719-1.172 2.821-1.174 1.030 0.003 1.948 0.378 2.652 1 0.638 0.565 1.097 1.332 1.28 2.209 0.113 0.541 0.642 0.888 1.183 0.775s0.888-0.642 0.775-1.183c-0.272-1.307-0.958-2.454-1.912-3.299-1.060-0.938-2.452-1.504-3.973-1.502-1.657 0.002-3.157 0.676-4.241 1.762s-1.756 2.587-1.754 4.243v3h-1c-0.828 0-1.58 0.337-2.121 0.879s-0.879 1.293-0.879 2.121v7c0 0.828 0.337 1.58 0.879 2.121s1.293 0.879 2.121 0.879h14c0.828 0 1.58-0.337 2.121-0.879s0.879-1.293 0.879-2.121v-7c0-0.828-0.337-1.58-0.879-2.121s-1.293-0.879-2.121-0.879z"></path></svg>
                            </div>
                            <div class = "my_works_contents_item_right_public_status_icon_1">
                                <!-- Generated by IcoMoon.io -->
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 8h3c1.105 0 2.103 0.447 2.828 1.172s1.172 1.723 1.172 2.828-0.447 2.103-1.172 2.828-1.723 1.172-2.828 1.172h-3c-0.552 0-1 0.448-1 1s0.448 1 1 1h3c1.657 0 3.158-0.673 4.243-1.757s1.757-2.586 1.757-4.243-0.673-3.158-1.757-4.243-2.586-1.757-4.243-1.757h-3c-0.552 0-1 0.448-1 1s0.448 1 1 1zM9 16h-3c-1.105 0-2.103-0.447-2.828-1.172s-1.172-1.723-1.172-2.828 0.447-2.103 1.172-2.828 1.723-1.172 2.828-1.172h3c0.552 0 1-0.448 1-1s-0.448-1-1-1h-3c-1.657 0-3.158 0.673-4.243 1.757s-1.757 2.586-1.757 4.243 0.673 3.158 1.757 4.243 2.586 1.757 4.243 1.757h3c0.552 0 1-0.448 1-1s-0.448-1-1-1zM8 13h8c0.552 0 1-0.448 1-1s-0.448-1-1-1h-8c-0.552 0-1 0.448-1 1s0.448 1 1 1z"></path></svg>
                            </div>
                            <div class = "my_works_contents_item_right_public_status_icon_2">
                                <!-- Generated by IcoMoon.io -->
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 12h14c0.276 0 0.525 0.111 0.707 0.293s0.293 0.431 0.293 0.707v7c0 0.276-0.111 0.525-0.293 0.707s-0.431 0.293-0.707 0.293h-14c-0.276 0-0.525-0.111-0.707-0.293s-0.293-0.431-0.293-0.707v-7c0-0.276 0.111-0.525 0.293-0.707s0.431-0.293 0.707-0.293zM18 10v-3c0-1.657-0.673-3.158-1.757-4.243s-2.586-1.757-4.243-1.757-3.158 0.673-4.243 1.757-1.757 2.586-1.757 4.243v3h-1c-0.828 0-1.58 0.337-2.121 0.879s-0.879 1.293-0.879 2.121v7c0 0.828 0.337 1.58 0.879 2.121s1.293 0.879 2.121 0.879h14c0.828 0 1.58-0.337 2.121-0.879s0.879-1.293 0.879-2.121v-7c0-0.828-0.337-1.58-0.879-2.121s-1.293-0.879-2.121-0.879zM8 10v-3c0-1.105 0.447-2.103 1.172-2.828s1.723-1.172 2.828-1.172 2.103 0.447 2.828 1.172 1.172 1.723 1.172 2.828v3z"></path></svg>
                            </div>
                        </div>
                        <div class = "value_title">
                            ` + getLanguage("public_status:" + info["public_status"]) + `
                        </div>
                        <div class="my_works_contents_item_right_public_status_selectlist_icon">
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M17.418 6.109c0.272-0.268 0.709-0.268 0.979 0s0.271 0.701 0 0.969l-7.908 7.83c-0.27 0.268-0.707 0.268-0.979 0l-7.908-7.83c-0.27-0.268-0.27-0.701 0-0.969s0.709-0.268 0.979 0l7.419 7.141 7.418-7.141z"></path></svg>
                        </div>
                    </div>
                </div>
                <div class = "my_works_contents_item_right_bottom">
                    <div class = "my_works_contents_item_right_bottom_info">
                        ` + getViewsNumberUnit(Number.parseInt(info["views"])) + ` · ` + getLanguage("work_round").replaceAll("{R:0}", commas(info["part"])) +  `
                    </div>
                    <div class = "my_works_contents_item_right_bottom_items scroll">
                        <div class = "my_works_contents_item_right_bottom_button md-ripples" onclick = "loadWorkspace_work_part_list(` + info["number"] + `);" onmouseenter = "hoverInformation(this, getLanguage('sidebar_workspace_work_part_list'));">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><rect width="10" height="3" rx="1.5" transform="translate(0 7)"></rect><rect width="35" height="3" rx="1.5" transform="translate(15 7)"></rect><rect width="10" height="3" rx="1.5" transform="translate(0 24)"></rect><rect width="10" height="3" rx="1.5" transform="translate(0 41)"></rect><rect width="29" height="3" rx="1.5" transform="translate(15 24)"></rect><rect width="35" height="3" rx="1.5" transform="translate(15 41)"></rect></g></svg>
                        </div>
                        <div class = "my_works_contents_item_right_bottom_button md-ripples" onclick = "loadWorkspace_work_analysis(` + info["number"] + `);" onmouseenter = "hoverInformation(this, getLanguage('sidebar_workspace_work_analysis'));">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><rect width="3" height="50" rx="1.5"></rect><rect width="3" height="50" rx="1.5" transform="translate(50 47) rotate(90)"></rect><rect width="3" height="18" rx="1.5" transform="translate(10 24)"></rect><rect width="3" height="28" rx="1.5" transform="translate(20 14)"></rect><rect width="3" height="11" rx="1.5" transform="translate(29 31)"></rect><rect width="3" height="21" rx="1.5" transform="translate(39 21)"></rect></g></svg>
                        </div>
                        <div class = "my_works_contents_item_right_bottom_button md-ripples" onclick = "loadWorkspace_work_comments(` + info["number"] + `);" onmouseenter = "hoverInformation(this, getLanguage('sidebar_workspace_work_comments'));">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M40.707,46.427h0a3.976,3.976,0,0,1-2.333-1.044c-3.13-2.487-11.917-9.316-12-9.383H5a5.006,5.006,0,0,1-5-5V5A5.006,5.006,0,0,1,5,0H45a5.006,5.006,0,0,1,5,5V31a5.005,5.005,0,0,1-5,5H42.466v9.106A2,2,0,0,1,40.707,46.427ZM4.906,3A1.985,1.985,0,0,0,3.016,4.9L2.984,31.027c0,.019.129,1.891,1.859,1.953H27.391l12.078,9.453V32.98h5.688A2.03,2.03,0,0,0,47,31l-.015-26.25c0-.017-.282-1.672-1.8-1.718Z" transform="translate(0 1.786)"></path></g></svg>
                        </div>
                        <div class = "my_works_contents_item_right_bottom_button md-ripples" onclick = "loadWorkspace_work_community(` + info["number"] + `);" onmouseenter = "hoverInformation(this, getLanguage('sidebar_workspace_work_community'));">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M25,50A25.007,25.007,0,0,1,15.269,1.965,25.007,25.007,0,0,1,34.731,48.036,24.843,24.843,0,0,1,25,50ZM25,3A22,22,0,1,0,47,25,22.025,22.025,0,0,0,25,3Z"></path><rect width="48" height="2" transform="translate(26 1) rotate(90)"></rect><path d="M0,0S11.775-11.288,23.775-11.288,48,0,48,0V2S35.775-9.288,23.775-9.288,0,2,0,2Z" transform="translate(26 1) rotate(90)"></path><path d="M0,0S11.775-11.288,23.775-11.288,48,0,48,0V2S35.775-9.288,23.775-9.288,0,2,0,2Z" transform="translate(24 49) rotate(-90)"></path><path d="M0,0S11.923-4.994,23.923-4.994,48,0,48,0V2S35.923-2.994,23.923-2.994,0,2,0,2Z" transform="translate(49 31.856) rotate(-180)"></path><path d="M0,0S11.923-4.994,23.923-4.994,48,0,48,0V2S35.923-2.994,23.923-2.994,0,2,0,2Z" transform="translate(1 17.85)"></path></g></svg>
                        </div>
                        <div class = "my_works_contents_item_right_bottom_button md-ripples" onclick = "loadWorkspace_work_localization(` + info["number"] + `);" onmouseenter = "hoverInformation(this, getLanguage('sidebar_workspace_work_localization'));">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><g transform="translate(0 -10)"><rect width="3" height="39" rx="1.5" transform="translate(13.339 12.326) rotate(20)"></rect><rect width="3" height="39" rx="1.5" transform="translate(12.35 13.352) rotate(-20)"></rect><rect width="3" height="15.5" rx="1.5" transform="translate(22.179 33.413) rotate(90)"></rect></g><g transform="translate(4.821 6)"><rect width="3" height="23.5" rx="1.5" transform="translate(45.179 15.413) rotate(90)"></rect><rect width="3" height="6.299" rx="1.5" transform="translate(34.929 17.589) rotate(180)"></rect><path d="M6.258-1.278A1.576,1.576,0,0,1,7.282.152s-3.4,8.118-4.351,14.5A42.123,42.123,0,0,0,3,26.749a1.5,1.5,0,0,1-3,0A46.581,46.581,0,0,1,.157,14.4C1.163,7.87,4.524-.436,4.524-.436A1.37,1.37,0,0,1,6.258-1.278Z" transform="translate(30.054 41.378) rotate(-150)"></path><path d="M-4.084.024A1.4,1.4,0,0,1-2.138.58,46.577,46.577,0,0,1,2.6,12.127a40.794,40.794,0,0,1,.4,11.8,1.5,1.5,0,0,1-3,0,25.612,25.612,0,0,0,0-10.38A49.119,49.119,0,0,0-4.77,1.8,1.48,1.48,0,0,1-4.084.024Z" transform="translate(39.585 41.423) rotate(150)"></path></g></g></svg>
                        </div>
                        <div class = "my_works_contents_item_right_bottom_button md-ripples" onclick = "loadMenu_work(` + info["number"] + `);" onmouseenter = "hoverInformation(this, getLanguage('more_button_workspace_details:go_to_work_page'));">
                            <!-- Generated by IcoMoon.io -->
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599c0.992 1.327 2.43 2.126 3.948 2.345s3.123-0.142 4.45-1.134c0.239-0.179 0.465-0.375 0.655-0.568l2.995-2.995c1.163-1.204 1.722-2.751 1.696-4.285s-0.639-3.061-1.831-4.211c-1.172-1.132-2.688-1.692-4.199-1.683-1.492 0.008-2.984 0.571-4.137 1.683l-1.731 1.721c-0.392 0.389-0.394 1.023-0.004 1.414s1.023 0.394 1.414 0.004l1.709-1.699c0.77-0.742 1.763-1.117 2.76-1.123 1.009-0.006 2.016 0.367 2.798 1.122 0.795 0.768 1.203 1.783 1.221 2.808s-0.355 2.054-1.11 2.836l-3.005 3.005c-0.114 0.116-0.263 0.247-0.428 0.37-0.885 0.662-1.952 0.902-2.967 0.756s-1.971-0.678-2.632-1.563c-0.331-0.442-0.957-0.533-1.4-0.202s-0.533 0.957-0.202 1.4zM14.801 10.401c-0.992-1.327-2.43-2.126-3.948-2.345s-3.124 0.142-4.451 1.134c-0.239 0.179-0.464 0.375-0.655 0.568l-2.995 2.995c-1.163 1.204-1.722 2.751-1.696 4.285s0.639 3.061 1.831 4.211c1.172 1.132 2.688 1.692 4.199 1.683 1.492-0.008 2.984-0.571 4.137-1.683l1.723-1.723c0.391-0.391 0.391-1.024 0-1.414s-1.024-0.391-1.414 0l-1.696 1.698c-0.77 0.742-1.763 1.117-2.76 1.123-1.009 0.006-2.016-0.367-2.798-1.122-0.795-0.768-1.203-1.783-1.221-2.808s0.355-2.054 1.11-2.836l3.005-3.005c0.114-0.116 0.263-0.247 0.428-0.37 0.885-0.662 1.952-0.902 2.967-0.756s1.971 0.678 2.632 1.563c0.331 0.442 0.957 0.533 1.4 0.202s0.533-0.957 0.202-1.4z"></path></svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;

    return html;
}

function addContentsWorkspaceMyWorks(menuNumber, html) {
    let contents = document.getElementById("contents_" + menuNumber);
    let items = contents.getElementsByClassName("my_works_contents_items")[0];

    let newEl = document.createElement("div");
    newEl.classList.add("visible_element");
    newEl.innerHTML = html;

    items.appendChild(newEl);
}

function showWorkspaceMyWorksMoreLoading(menuNumber) {
    let contents = document.getElementById("contents_" + menuNumber);
    let loading = contents.getElementsByClassName("my_works_contents_loading")[0];
    loading.style.display = "block";
}
function hideWorkspaceMyWorksMoreLoading(menuNumber) {
    let contents = document.getElementById("contents_" + menuNumber);
    let loading = contents.getElementsByClassName("my_works_contents_loading")[0];
    loading.style.display = "none";
}
function checkWorkspaceMyWorksMoreLoading(menuNumber) {
    if (workspaceMyWorksLoadNumbers[menuNumber].length == 0) {
        hideWorkspaceMyWorksMoreLoading(menuNumber);
        workspaceMyWorksLoadNumbers[menuNumber] = null;
    } else {
        showWorkspaceMyWorksMoreLoading(menuNumber);
    }
}

function moreLoadWorkspaceMyWorks(menuNumber) {
    if (workspaceMyWorksLoadNumbers[menuNumber] == null || workspaceMyWorksLoadNumbers[menuNumber].length == 0) {
        workspaceMyWorksLoadNumbers[menuNumber] = null;
        isWorkspaceMyWorksMoreLoad[menuNumber] = null;
        return;
    }

    const xhr = new XMLHttpRequest();
    const method = "POST";
    
    xhr.open(method, "/menu/workspace/php/my_works/getInfo.php");
    
    xhr.addEventListener('readystatechange', function (event) {
        const { target } = event;
        if (target.readyState === XMLHttpRequest.DONE) {
            const { status } = target;
            if (status === 0 || (status >= 200 && status < 400)) {
                let xhrHtml = xhr.responseText;
                let info = JSON.parse(xhrHtml);

                for (let i = 0; i < info.length; i++) {
                    let html = getHtmlWorkspaceMyWorks(info[i]);
                    addContentsWorkspaceMyWorks(menuNumber, html);
            
                    let array = workspaceMyWorksLoadNumbers[menuNumber];
                    array = array.remove("" + info[i]["number"]);
                    workspaceMyWorksLoadNumbers[menuNumber] = array;
                }

                isWorkspaceMyWorksMoreLoad[menuNumber] = null;
                checkWorkspaceMyWorksMoreLoading(menuNumber);
            } else {
                if (status == 504) {
                    //시간 초과
                    serverResponseErrorMessage(0);
                } else {
                    //오류 발생
                    serverResponseErrorMessage(1);
                }
            }
        }
    });

    let numbers = workspaceMyWorksLoadNumbers[menuNumber];
    let numbersMaxCount = (numbers.length >= 15) ? 15 : numbers.length;
    numbers = numbers.splice(0, numbersMaxCount);
    
    var formData = new FormData();
    formData.append("lang", userLanguage);
    formData.append("numbers", numbers.join(","));

    xhr.send(formData);
}


let isWorkspaceMyWorksMoreLoad = new Array();

function checkWorkspaceMyWorksLoad() {
    if (getCurrentMenuName() == "workspace_my_works") {
        let scrollPercent = ((document.documentElement.scrollTop + window.innerHeight) / (document.documentElement.scrollHeight - 60)) * 100;
        if (scrollPercent >= 100) {
            let number = getCurrentMenuNumber();
            if (isWorkspaceMyWorksMoreLoad[number] == null) {
                isWorkspaceMyWorksMoreLoad[number] = true;
                moreLoadWorkspaceMyWorks(number);
            }
        }
    }
}
addEventListener("scroll", checkWorkspaceMyWorksLoad);
addEventListener("resize", checkWorkspaceMyWorksLoad);





function workspaceMyWorksOptionLoad(menuNumber) {
    loading();

    const xhr = new XMLHttpRequest();
    const method = "POST";
    
    xhr.open(method, "/menu/workspace/php/my_works/getNumbers.php");
    
    xhr.addEventListener('readystatechange', function (event) {
        const { target } = event;
        if (target.readyState === XMLHttpRequest.DONE) {
            const { status } = target;
            if (status === 0 || (status >= 200 && status < 400)) {
                let xhrHtml = xhr.responseText;
                let json = JSON.parse(xhrHtml);
                
                let numbers = document.getElementById("my_works_numbers_" + menuNumber);
                let info_json = document.getElementById("my_works_info_json_" + menuNumber);
                numbers.innerText = json["numbers"];
                info_json.innerText = json["info"];

                workspaceMyWorksLoad(menuNumber);
            } else {
                if (status == 504) {
                    //시간 초과
                    serverResponseErrorMessage(0);
                } else {
                    //오류 발생
                    serverResponseErrorMessage(1);
                }
            }
            loadingComplete();
        }
    });

    //옵션
    let contents = document.getElementById("contents_" + menuNumber);
    let sort = contents.getElementsByClassName("sort_box");
    
    var formData = new FormData();
    formData.append("lang", userLanguage);
    formData.append("sort", sort[0].getAttribute("value"));
    formData.append("workType", sort[1].getAttribute("value"));

    xhr.send(formData);
}


var previousMyWorksChangeStateEl = null;

function workspaceMyWorksChangeState(el, workNumber, undoValue) {
    let publicStatus = null;
    let previousValue = null;
    if (el != null) {
        publicStatus = el.getAttribute("value");
        previousValue = el.getAttribute("previous_value");
        previousMyWorksChangeStateEl = el;
    } else {
        publicStatus = undoValue;
        previousValue = null;

        previousMyWorksChangeStateEl.getElementsByClassName("value_title")[0].innerText = getLanguage("public_status:" + publicStatus);
        previousMyWorksChangeStateEl.setAttribute("value", publicStatus);
        previousMyWorksChangeStateEl.setAttribute("previous_value", publicStatus);
    }

    loading();

    const xhr = new XMLHttpRequest();
    const method = "POST";
    
    xhr.open(method, "/menu/workspace/php/my_works/changeWorkPublicState.php");
    
    xhr.addEventListener('readystatechange', function (event) {
        const { target } = event;
        if (target.readyState === XMLHttpRequest.DONE) {
            const { status } = target;
            if (status === 0 || (status >= 200 && status < 400)) {
                let xhrHtml = xhr.responseText;

                if (undoValue == null) {
                    actionMessage(getLanguage("change_public_status_message:" + publicStatus), "workspaceMyWorksChangeState(null, " + workNumber + ", " + previousValue + ");");
                    el.setAttribute("previous_value", publicStatus);
                } else {
                    actionMessage(getLanguage("change_public_status_message:" + publicStatus));
                }

                //workspace_work_details
                if (getCurrentMenuName() == "workspace_work_details") {
                    workspaceWorkChangePublicState(getCurrentMenuNumber(), previousMyWorksChangeStateEl);
                }
            } else {
                if (status == 504) {
                    //시간 초과
                    serverResponseErrorMessage(0);
                } else {
                    //오류 발생
                    serverResponseErrorMessage(1);
                }
            }
            loadingComplete();
        }
    });
    
    var formData = new FormData();
    formData.append("work_number", workNumber);
    formData.append("public_status", publicStatus);

    xhr.send(formData);
}






















function getMyWorksSortItems() {
    let items = new Array();
    items[0] = {
        "title": getLanguage("workspace_my_works_select_sort:0"),
        "value": 0
    }
    items[1] = {
        "title": getLanguage("workspace_my_works_select_sort:1"),
        "value": 1
    }
    return items;
}
function getMyWorksWorkTypeItems() {
    let items = new Array();
    items[0] = {
        "title": getLanguage("popup_search_filter_value_work_type:0"),
        "icon": '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"/></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M25,700a1.5,1.5,0,0,1,.844.26l23.5,16A1.5,1.5,0,0,1,49.4,718.7L25.9,736.2a1.5,1.5,0,0,1-1.792,0L.6,718.7a1.5,1.5,0,0,1,.052-2.443l23.5-16A1.5,1.5,0,0,1,25,700Zm20.915,17.555L25,703.315,4.085,717.555,25,733.13Z" transform="translate(0 -700)"/><path d="M24.953,736.551a1.5,1.5,0,0,1-.9-.3L.6,718.754a1.5,1.5,0,0,1,1.794-2.4l22.558,16.832,22.65-16.834a1.5,1.5,0,1,1,1.789,2.408l-23.547,17.5A1.5,1.5,0,0,1,24.953,736.551Z" transform="translate(0 -686.551)"/></g></svg>',
        "value": 0
    }
    items[1] = {
        "title": getLanguage("work_settings_contents_type:0"),
        "icon": '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"/></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M-72.583-761.2c-2.946-3.826-6.227-5.765-9.755-5.765h0c-6.133,0-11.229,5.774-11.281,5.833a1.5,1.5,0,0,1-1.126.517h-.006a1.5,1.5,0,0,1-1.124-.506c-3.431-3.877-7.015-5.844-10.651-5.844h0c-6.23,0-10.743,5.713-10.788,5.771a1.5,1.5,0,0,1-1.67.5A1.5,1.5,0,0,1-120-762.116v-30.063a1.5,1.5,0,0,1,.318-.922c3.574-4.578,7.7-6.9,12.273-6.9h0c5.73,0,10.491,3.7,12.606,5.656C-91.165-798.1-87.269-800-83.2-800c7.569,0,12.778,6.622,13,6.9a1.5,1.5,0,0,1,.313.917v30.063a1.5,1.5,0,0,1-1.017,1.42,1.5,1.5,0,0,1-.483.08A1.5,1.5,0,0,1-72.583-761.2Zm-20.812-4.26c2.423-1.988,6.408-4.5,11.056-4.5h0a13.728,13.728,0,0,1,9.444,3.972v-25.638a19,19,0,0,0-2.779-2.56A12.553,12.553,0,0,0-83.2-797c-3.485,0-6.913,1.867-10.191,5.549ZM-117-791.653v25.91a16.593,16.593,0,0,1,10.471-4.223h0a15.532,15.532,0,0,1,10.132,4.125v-25.873c-1.474-1.438-5.9-5.285-11.013-5.285h0C-110.882-797-114.105-795.2-117-791.653Z" transform="translate(119.895 805.308)"/></g></svg>',
        "value": 1
    }
    items[2] = {
        "title": getLanguage("work_settings_contents_type:1"),
        "icon": '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"/></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M3,3H3V18H47V3H3M3,0H47a3,3,0,0,1,3,3V18a3,3,0,0,1-3,3H3a3,3,0,0,1-3-3V3A3,3,0,0,1,3,0Z"/><path d="M1.5,925H27a1.5,1.5,0,0,1,1.329,2.195l-11.5,22A1.5,1.5,0,0,1,15.5,950H1.508a1.5,1.5,0,0,1-1.5-1.5L0,926.5A1.5,1.5,0,0,1,1.5,925Zm23.023,3H3l.007,19H14.592Z" transform="translate(0 -900)"/><path d="M1.5,927H26a1.5,1.5,0,0,1,1.33,2.194l-11.5,22.03a1.5,1.5,0,0,1-1.33.806h-.006l-13.5-.053A1.5,1.5,0,0,1-.5,950.442L0,928.466A1.5,1.5,0,0,1,1.5,927Zm22.025,3H2.966l-.432,18.982,11.058.044Z" transform="translate(49.5 977) rotate(180)"/></g></svg>',
        "value": 2
    }
    items[3] = {
        "title": getLanguage("work_settings_contents_type:2"),
        "icon": '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"></rect></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M121.5,500h47a1.5,1.5,0,0,1,1.5,1.5V516a1.5,1.5,0,0,1-1.218,1.473l-47,9A1.5,1.5,0,0,1,120,525V501.5A1.5,1.5,0,0,1,121.5,500Zm45.5,3H123v20.186l44-8.426Z" transform="translate(-120 -500)"></path><path d="M121.5,500h47a1.5,1.5,0,0,1,1.5,1.5V516a1.5,1.5,0,0,1-1.218,1.473l-47,9A1.5,1.5,0,0,1,120,525V501.5A1.5,1.5,0,0,1,121.5,500Zm45.5,3H123v20.186l44-8.426Z" transform="translate(170 550) rotate(180)"></path></g></svg>',
        "value": 3
    }
    items[4] = {
        "title": getLanguage("work_settings_contents_type:3"),
        "icon": '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" viewBox="0 0 50 50"><defs><clipPath id="b"><rect width="50" height="50"/></clipPath></defs><g id="a" clip-path="url(#b)"><path d="M6.712,1000a1.5,1.5,0,0,1,.745.2l41.052,23.5a1.5,1.5,0,0,1,0,2.6L7.458,1049.8a1.5,1.5,0,0,1-2.245-1.3v-47a1.5,1.5,0,0,1,1.5-1.5Zm38.032,25L8.212,1004.087v41.826Z" transform="translate(0.736 -1000)"/></g></svg>',
        "value": 4
    }
    return items;
}